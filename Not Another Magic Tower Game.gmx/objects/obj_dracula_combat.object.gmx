<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_draculaCombat</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_monsterBattlePrototype</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>appear = 0;
transformed = 0;
transformStart = 0;
alpha = 0;

transfer = 0;
meteorShot = 0;
fireballShot = 0;

p = 0;
blank = 0;
pDir = 0;

tranformCountDown = 0;

clawHitCount = 0;

angle = 0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
name = "Dracula";
image_speed = 1/8;
image_xscale = 2;
image_yscale = 2;
x=560;
y=480;
alarm[11] = 50;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(obj_draculaRealBody)
{
    instance_destroy();
}
with(obj_draculaClaw)
{
    instance_destroy();
}
with(obj_draculaHand)
{
    instance_destroy();
}
event_inherited();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(x, 0, obj_draculaDisappearEffect);
transfer = true;
targetX = random_range(128, 672);
if(hp &lt;= 40)
{
    targetX = 400;
    targetY = 368;
}
alpha = 1;
alarm[3] = 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>view_xview[0] = random_range(-3,3);
view_yview[0] = random_range(-3,3);
if(tranformCountDown &gt; 0)
{
    tranformCountDown -= 1;
    if(tranformCountDown == 0)
    {
        sound_play(sndDraculaTran2);
        audio_playsound(sndQuake);
    }
    alarm[10] = 1;
}
else
{
    ShakeScreen(5);
    if(image_xscale &gt; 0)
    {
        image_xscale -= 0.02;
        image_yscale -= 0.02;
        alarm[10] = 1;
    }
    else
    {
        image_alpha = 0;
        instance_create(x,y,obj_draculaRealBody);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(fireballShot &gt; 0)
{
    fireballShot -= 1;
    blank = irandom_range(0,4)
    for(var i = 0; i &lt; 5; i += 1)
    {
        if(i == blank)
        {
            continue;
        }
        pDir = sign(player.x - x);
        p = instance_create(x + pDir * 10,y - 20,obj_draculaFireball);
        p.image_angle = 270 * 90 * pDir;
        p.hspeed = 4 * pDir;
        p.targetY = y - 20 + (i - 2) * 40;
        p.stepY = (i - 2) * 40 / 50;
    }
    sound_play(sndFire1);
    alarm[7] = 35;
}
else
{
    alarm[11] = 40;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>for(var i = 0; i &lt; 3; i += 1)
{
    p = instance_create(x + 45 * cos(degtorad(90 + 120 * i)),  y - 45 * sin(degtorad(90 + 120 * i)), obj_draculaMeteor2);
    p.rad = 45;
    p.dir = 90 + 120 * i;
    p.cx = x;
    p.cy = y;
    with(p)
    {
        event_user(0);
    }
}
sound_play(sndBurst1);
alarm[11] = 80;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(meteorShot == 2)
{
    sound_play(sndFire2);
    instance_create(x + sign(player.x - x) * 10, y - 20, obj_draculaMeteorAppear);
    meteorShot-=1;
    alarm[5] =35;
}
else if(meteorShot == 1)
{
    meteorShot -= 1;
    instance_create(x + sign(player.x - x) * 10, y + 20, obj_draculaMeteorAppear);
    alarm[5] =35;
}
else
{
    alarm[11] = 50;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!appear)
{
    appear = true;
    if(transformed)
    {
        x = 400;
        y = 368;
        audio_playsound(sndDraculaTran1);
    }   
    instance_create(x, 0, obj_draculaAppearEffect);
}
if(image_alpha &lt; 1)
{
    image_alpha += 0.03;
    alarm[4] = 1;
}
else
{
    transfer = false;
    meteorShot = 2;
    fireballShot = 4;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(alpha &gt; 0)
{
    alpha -= 0.02;
    if(image_alpha &gt; alpha)
    {
        image_alpha = alpha;
    }
    alarm[3] = 1;
}
else
{
    image_alpha = 0;
    x = targetX;
    appear = false;
    alarm[4] = 50;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!transformed &amp;&amp; hp &lt;= 40)
{
    if(targetX == 400 &amp;&amp; targetY == 368)
    {
        transformStart = true;
        transformed = true;
    }
}
if(transformed &amp;&amp; !transformStart)
{
    angle += 5;
    y = 368 + 3 * sin(degtorad(angle));
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(image_alpha &gt;= 0.8)
{
    if(transformStart || (hp &lt;= 40 &amp;&amp; y &gt; 400))
    {
        with(other)
        {
            if(!instance_exists(obj_monsterHPBlock))
            {
                instance_create(x,y,obj_monsterHPBlock);
            }
            audio_playsound(sndIce1);
            hitEffect();
            instance_destroy();
        }
    }
    else
    {
        event_inherited();
    }
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(image_alpha &gt;= 0.8)
{
    event_inherited();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(clawHitCount &gt;= 3)
{
    if(!global.achievements[67])
    {
        var ch = instance_create(0,608,obj_achievements);
        ch.index = 67;
        global.achievements[67] = true;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
