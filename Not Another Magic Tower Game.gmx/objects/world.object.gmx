<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-100000</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.testMode=true;
cleanmem_init(0);
music_init();
global.savenum = 1;//ÔøΩZÔøΩ[ÔøΩuÔøΩtÔøΩ@ÔøΩCÔøΩÔøΩÔøΩ‘çÔøΩ
global.difficulty = 3;//ÔøΩQÔøΩ[ÔøΩÔøΩÔøΩÃìÔøΩ’ìxÔøΩiÔøΩ»íPÔøΩFÔøΩOÔøΩÔøΩÔøΩRÔøΩFÔøΩÔÇµÔøΩÔøΩÔøΩj
global.room_caption_def = "Not Another Magic Tower Game";//ÔøΩfÔøΩoÔøΩbÔøΩOÔøΩp

//ÔøΩÔøΩÔøΩSÔøΩÔøΩÔøΩ∆åoÔøΩﬂéÔøΩÔøΩÔøΩ
global.death[1] = 0;
global.death[2] = 0;
global.death[3] = 0;
global.timestep[1] = 0;
global.timestep[2] = 0;
global.timestep[3] = 0;

//ÔøΩÔøΩÔøΩSÔøΩÔøΩÔøΩ∆åoÔøΩﬂéÔøΩÔøΩ‘ÇÃì«Ç›çÔøΩÔøΩÔøΩ
loadDeathTime();

memory_count = 0;

// TODO transition_define(101, "scr_tr_squeeze_right");
// TODO transition_define(102, "scr_tr_bars_both");
// TODO transition_define(103, "scr_tr_diagonal1_in");
// TODO transition_define(104, "scr_tr_blocks");
// TODO transition_define(105, "scr_tr_pixelation");
//transition_define(106, "scr_tr_mirage");
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>fpscount = 0;

pauseon = false;
pauseback = noone;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_exists(player))
{
    player.visible = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//ÔøΩfÔøΩoÔøΩbÔøΩOÔøΩpÔøΩiÔøΩÔøΩÔøΩSÔøΩÔøΩÔøΩ∆åoÔøΩﬂéÔøΩÔøΩ‘ÇÃï`ÔøΩÔøΩj
var _caption = global.room_caption_def + " Death["+string(global.savenum)+"]:"+string(global.death[global.savenum]);



global.time[global.savenum]=global.timestep[global.savenum] div (2*room_speed);
global.hour[global.savenum]=global.time[global.savenum] div 3600;
global.atime[global.savenum]=global.time[global.savenum] mod 3600;
global.muni[global.savenum]=global.atime[global.savenum] div 60;
global.sec[global.savenum]=global.atime[global.savenum] mod 60;
global.msec[global.savenum]=global.timestep[global.savenum]-global.time[global.savenum]*2*room_speed;
if round(global.msec[global.savenum])&gt;=10 {
_caption += " FPS:" + string(fps) + " Time["+string(global.savenum)+"]:"+string(global.hour[global.savenum])+":"
+string(global.muni[global.savenum])+":"+string(global.sec[global.savenum])+"."+string(round(global.msec[global.savenum]));
}
else{
_caption += " FPS:" + string(fps) + " Time["+string(global.savenum)+"]:"+string(global.hour[global.savenum])+":"
+string(global.muni[global.savenum])+":"+string(global.sec[global.savenum])+".0"+string(round(global.msec[global.savenum]));
}

window_set_caption(_caption);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//pause

if(room != rInit &amp;&amp; room != rMenu &amp;&amp; room != rTitle &amp;&amp; room != rSelectStage &amp;&amp; room != rBadEnding &amp;&amp; room != rTruth &amp;&amp; !global.inCombat &amp;&amp; !global.GalleryBossFight){
    if keyboard_check_pressed(global.pausebutton){
        if ( pauseon = false ){
            if player_is_alive() or instance_exists(player2){
                pauseon = true; 
                pauseback = background_create_from_surface(application_surface, 0,0,room_width,room_height,0,0); 
                instance_deactivate_all(1);   
                instance_activate_object(world);
            }
        }
        else{ 
            pauseon = false;
            instance_activate_all(); 
            background_delete(pauseback);  
            if fps!=0{
                if !global.clear
                global.timestep[global.savenum] += 2*room_speed/fps;
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//TimeÔøΩÃåvÔøΩÔøΩ
if abs(fps-50)&gt;1{
    fpscount+=1;
}
else fpscount=0;

if(room != rInit &amp;&amp; room != rMenu &amp;&amp; room != rTitle &amp;&amp; room != rSelectStage){
    if(pauseon = false and fps!=0 and !global.clear){
        if fpscount&lt;100{
            global.timestep[global.savenum] += 2;
        }
        else{
            global.timestep[global.savenum] += 2*room_speed/fps;
        }
    }
}

//cleanmem
memory_count+=1;
if memory_count=10{
    cleanmem();
    memory_count=0;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(room == r10F &amp;&amp; global.skipable)
{
    if(keyboard_check_pressed(global.skipbutton))
    {
        if(instance_exists(obj_skipInfo))
        {
            with(obj_skipInfo)
            {
                instance_destroy();
            }
        }
        instance_activate_all();
        with(obj_beBattleTrigger)
        {
            for(i=0;i&lt;=7;i+=1)
            {
                alarm[i]=0;
            }
            alarm[11] = 1;
        }
    }
}
if(room == rBadEnding &amp;&amp; !global.BESkipped)
{
    if(keyboard_check_pressed(global.skipbutton))
    {
        if(instance_exists(obj_skipInfo))
        {
            with(obj_skipInfo)
            {
                instance_destroy();
            }
        }
        global.BESkipped = true;
        //transition_kind = 21;
        //transition_steps = 150;
        room_goto(rStatistics);
    }
}

if(room == rGayEnding || room == rGE3D || room == rGeCredit)
{
    if(keyboard_check_pressed(global.skipbutton))
    {
        if(!global.GESkipped)
        {
            global.GESkipped = true;
            //transition_kind = 21;
            //transition_steps = 50;
            global.koala = 25000;
            room_goto(rStatistics);
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Godmod
if(global.godmod)
{
    if player_is_alive()
    {
        if(mouse_check_button_pressed(mb_right))
        {
            player.x = mouse_x;
            player.y = mouse_y;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.special[7] &amp;&amp; player_is_alive() &amp;&amp; room != rFinalCorridor)
{
    if(keyboard_check_direct(global.shotbutton))
    {
        if(!player.frozen)
        {
            if(global.PowerAmplifier)
            {
                maxEnergy = HellBulletEnergy;
                stepEnergy = 0.03;
            }
            else
            {
                maxEnergy = MaxBulletEnergy;
                stepEnergy = 0.01;
            }
            if(global.shotEnergy &lt; maxEnergy)
            {
                global.shotEnergy += stepEnergy;
                if(global.shotEnergy &gt;= maxEnergy)
                {
                    global.shotEnergy = maxEnergy;
                    sound_stop(snd_touhou_powerup);
                    sound_fix(sndExpMax);
                }
            }
            if(global.shotEnergy &gt;= 1.25)
            {
                if(!instance_exists(obj_gather))
                { 
                   instance_create(player.x + 11 * sign(player.image_xscale), player.y - 3, obj_gather);                     
                }
            }
        }
        else
        {
            if(instance_exists(obj_gather))
            {
                with(obj_gather)
                {
                    instance_destroy();
                }
                global.shotEnergy = 1;
            }
        }        
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Restart function
if(pauseon == 0)
{
    if(keyboard_check_pressed(global.restartbutton))
    {
        //ÔøΩÔøΩÔøΩjÔøΩÔøΩÔøΩ[ÔøΩÔøΩ Ç≈Ç»ÇÔøΩÔøΩÔøΩŒÉQÔøΩ[ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ[ÔøΩhÔøΩiÔøΩÔøΩÔøΩXÔøΩ^ÔøΩ[ÔøΩgÔøΩj
        if(global.isJK &amp;&amp; room != ExtraJKBonus &amp;&amp; room != ExtraJKPortal)
        {
            if(!keyboard_check_direct(vk_control))
            {
                with(bloodEmitter)
                {
                    instance_destroy();
                }
                exit;
            }     
        }
        
        // sound function
        //SS_StopSound(SE_Death);
        sound_stop(sndDeath);
        if(instance_exists(obj_combatController))
        {
            with(obj_combatController)
            {
                if(battleBGM) sound_stop(battleBGM);
            }
        }
        global.inCombat = false;
        if instance_exists(objDeathSound){
            if !global.paused{
                //SS_SetSoundVol(curMusic,objDeathSound.start_vol);
                with objDeathSound instance_destroy();
            }
            else{
                //if !global.audio_music_muted{
                //    SS_SetSoundVol(curMusic,2000+80*global.audio_music_volume);
                //    SS_ResumeSound(curMusic);
                //}
                with objDeathSound instance_destroy();
            }
        }
        // restart function
        if(room != rInit &amp;&amp; room != rMenu &amp;&amp; room != rSelectStage &amp;&amp; room != rTitle &amp;&amp; room != rBadEnding &amp;&amp; room != rTruth){
        //global.death[global.savenum]=0
        with(player){
            instance_destroy();
        }
        with(bow){
            instance_destroy();
        }
        with(obj_superFasf_combat)
        {
            instance_destroy();
        }
        with(obj_faShiLiu_combat)
        {
            instance_destroy();
        }
        with(obj_faro_combat)
        {
            instance_destroy();
        }
        with(obj_osuController)
        {
            instance_destroy();
        }
        with(obj_tlController)
        {
            instance_destroy();
        }
        with(obj_evilDragon_combat)
        {
            instance_destroy();
        }
        with(obj_seController)
        {
            instance_destroy();
        }
        with(obj_dynamiteInUse)
        {
            instance_destroy();
        }
        global.carryPrincess = false;
        with(obj_fatPrincess)
        {
            instance_destroy();
        }
        if(player_is_alive() or instance_exists(player2)){
            saveDeathTime();
            if fps!=0{
                    if !global.clear
                    global.timestep[global.savenum] += 2*room_speed/fps;
            }
        }
        //sound_stop_all();
        loadGame();
        loadAchievements();
        global.isRandom = false;
        ini_open(global.sfname);    // save file name, change this in the obj_options_init object;
        
        global.leftbutton = ini_read_real("Controls","Left",37);
        global.rightbutton = ini_read_real("Controls","Right",39);
        global.upbutton = ini_read_real("Controls","Up",38);
        global.downbutton = ini_read_real("Controls","Down",40);
        global.jumpbutton = ini_read_real("Controls","Jump",16);
        global.shotbutton = ini_read_real("Controls","Shoot",90);
        global.restartbutton = ini_read_real("Controls","Restart",82);
        global.pausebutton = ini_read_real("Controls","Pause",80);
        global.skipbutton = ini_read_real("Controls","Skip",83);
        global.menubutton = ini_read_real("Controls","Menu",88);
        
        ini_close();
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if keyboard_check(vk_control)
{
    room_speed = 1000;
}
else
{
    room_speed = 50;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var monsterPercentage, specialPercentage,
    mKilled, achCount, extraBubbleStar, extraJKStar;

global.totalPercentage = 0;
monsterPercentage = 0.4;
achievementPercentage = 0.25;
specialPercentage = 0.15;
extraPercentage = 0.2;

mKilled = 0;
achCount = 0;
extraBubbleStar = 0;
extraJKStar = 0;

for(i = 0; i &lt; 200; i += 1)
{
    if(i != 4 &amp;&amp; i != 144 &amp;&amp; i != 156)
    {
        if(global.monsters[i])
        {
            mKilled += 1;
        }
    }  
}

global.totalPercentage += mKilled / 200 * monsterPercentage;

for(i = 0; i &lt; 65; i += 1)
{
    if(global.achievements[i])
    {
        achCount += 1;
    }
}
global.totalPercentage += achCount / 65 * achievementPercentage;

if(global.monsters[96])
{
    global.totalPercentage += 0.01;
}
if(global.monsters[73])
{
    global.totalPercentage += 0.02;
}
if(global.greenKeys[2])
{
    global.totalPercentage += 0.01;
}
if(global.monsters[202])
{
    global.totalPercentage += 0.01;
}
if(global.story[25])
{
    global.totalPercentage += 0.04;
}
for(i = 2; i &lt; 8; i += 1)
{
    if(global.special[i])
    {
        global.totalPercentage += 0.01;
    }
}

for(i = 0; i &lt; 10; i += 1)
{
 extraBubbleStar += global.bubbleStageStar[i];
}
global.totalPercentage += extraBubbleStar / 30 * 0.05;

for(i = 0; i &lt; 10; i += 1)
{
 extraJKStar += global.ExtraJkStar[i];
}
global.totalPercentage += extraJKStar / 30 * 0.05;

if(global.hpUp[196])
{
    global.totalPercentage += 1 / 6 * 0.05;
}
if(global.hpUp[200])
{
    global.totalPercentage += 1 / 6 * 0.05;
}
if(global.hpUp[202])
{
    global.totalPercentage += 1 / 6 * 0.05;
}
if(global.blueKeys[22])
{
    global.totalPercentage += 1 / 6 * 0.05;
}
if(global.hpUp[204])
{
    global.totalPercentage += 1 / 6 * 0.05;
}
if(global.defUp[61])
{
    global.totalPercentage += 1 / 6 * 0.05;
}

if(global.mmmHighScore &gt;= 1200)
{
    global.totalPercentage += 5 / 5 * 0.05;
}
else if(global.mmmHighScore &gt;= 1000)
{
    global.totalPercentage += 4 / 5 * 0.05;
}
else if(global.mmmHighScore &gt;= 750)
{
    global.totalPercentage += 3 / 5 * 0.05;
}
else if(global.mmmHighScore &gt;= 500)
{
    global.totalPercentage += 2 / 5 * 0.05;
}
else if(global.mmmHighScore &gt;= 250)
{
    global.totalPercentage += 1 / 5 * 0.05;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.monsterSuperCritical = false;
global.monsterCritical = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_exists(player))
{
 player.visible = true;
}
//ÔøΩÔøΩÔøΩ[ÔøΩÔøΩÔøΩÃÇPÔøΩbÔøΩ‘ÇÃÉXÔøΩeÔøΩbÔøΩvÔøΩÔøΩÔøΩÔøΩ›íÔøΩ
room_speed=50;
//ÔøΩÔøΩÔøΩ[ÔøΩÔøΩÔøΩLÔøΩÔøΩÔøΩvÔøΩVÔøΩÔøΩÔøΩÔøΩÔøΩÃê›íÔøΩiÔøΩÔøΩ…èoÔøΩƒÇÈï∂ÔøΩÔøΩÔøΩÀÅj
room_caption="Not Another Magic Tower Game";
global.difficulty = 0;
if(global.lite=0){
if(room != rInit &amp;&amp; room != rMenu &amp;&amp; room != rSelectStage &amp;&amp; room != rTitle){
  if(global.difficulty == 0){
    room_caption += " Medium";
  }else if(global.difficulty == 1){
    room_caption += " Hard";
  }else if(global.difficulty == 2){
    room_caption += " VeryHard";
  }else if(global.difficulty == 3){
    room_caption += " Impossible";
  }
}
if(room != rInit &amp;&amp; room != rMenu &amp;&amp; room != rTitle){
  room_caption += "  Save"+string(global.savenum);
}
}
global.room_caption_def = room_caption;

//if(global.music=1) { sound_stop_all() }


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(world)
{
    event_user(0);
}
alarm[0] = 1;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if(room == rFinalCorridor)
{
    if(!instance_exists(obj_finalTowerParticle))
    {
        instance_create(0,0,obj_finalTowerParticle);
    }
}
else
{
    with(obj_finalTowerParticle)
    {
        instance_destroy();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//SS_Unload();

FMODAllStop();
FMODfree();
cleanmem_init(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrInit();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if ( pauseon == true ) 
{ 
    draw_background(pauseback,view_xview[0],view_yview[0]); 
    draw_set_alpha(0.5);
    draw_set_color(c_black);
    draw_rectangle(0,0,room_width,room_height,0);
    draw_set_alpha(1);
    draw_set_color(c_white);
    draw_set_blend_mode(bm_normal);
    draw_sprite(sprPause,0,view_xview[0]+400,view_yview[0]+304)
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="123">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if(!global.testMode) exit;
if(global.skipMonsters == true)
{
    global.skipMonsters = false;
    show_message("Battle Skipping Disabled");
}   
else
{
    global.skipMonsters = true;
    show_message("Battle Skipping Enabled")
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="122">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if(!global.testMode) exit;
if(global.godmod)
{
    global.godmod = false;
    show_message("God mode deactivated.");
}
else
{
    global.godmod = true;
    show_message("God mode activated. ");
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="121">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
if(!global.testMode) exit;
bType = get_integer("Provide the type you want to add:",0);
bAmmount = get_integer("Provide the ammount:", 0);
if(bType == 0)
{
    global.attack += bAmmount;
}
else if(bType == 1)
{
    global.defense += bAmmount;
}
else if(bType == 2)
{
    global.hp += bAmmount;
}
else if(bType == 3)
{
    global.yellowKeyNum += bAmmount;
}
else if(bType == 4)
{
    global.blueKeyNum += bAmmount;
}
else if(bType == 5)
{
    global.redKeyNum += bAmmount;
}
else if(bType == 6)
{
    global.greenKeyNum += bAmmount;
}
else if(bType == 7)
{
    global.ironKeyNum += bAmmount;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="120">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
if(!global.testMode) exit;
/*bossPart = get_integer("Provide test part for the tower lead(0~5)", global.part);
global.part = bossPart;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="115">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Alt+F4 - ÔøΩQÔøΩ[ÔøΩÔøΩÔøΩÔøΩ~ÔøΩﬂÇÔøΩ
if(keyboard_check(vk_alt) == true){
  file_delete("temp");
  game_end();
}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="113">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//ÔøΩƒãNÔøΩÔøΩ
if(global.inCombat)
   exit;
//SS_StopSound(global.currentBGM);
FMODInstanceStop(global.currentBGM);
//SS_StopSound(SE_Death);
sound_stop_all();
saveDeathTime();
file_delete("temp");
with player instance_destroy();
with obj_seController instance_destroy();
room_goto(rTitle);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="82">
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>pauseon</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
//ÔøΩÔøΩÔøΩjÔøΩÔøΩÔøΩ[ÔøΩÔøΩ Ç≈Ç»ÇÔøΩÔøΩÔøΩŒÉQÔøΩ[ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ[ÔøΩhÔøΩiÔøΩÔøΩÔøΩXÔøΩ^ÔøΩ[ÔøΩgÔøΩj
if(global.isJK &amp;&amp; room != ExtraJKBonus &amp;&amp; room != ExtraJKPortal)
{
    if(!keyboard_check_direct(vk_control))
       exit;
}

// sound function
//SS_StopSound(SE_Death);
sound_stop(sndDeath);
if(instance_exists(obj_combatController))
{
    with(obj_combatController)
    {
        if(battleBGM) sound_stop(battleBGM);
    }
}
global.inCombat = false;
if instance_exists(objDeathSound){
    if !global.paused{
        //SS_SetSoundVol(curMusic,objDeathSound.start_vol);
        with objDeathSound instance_destroy();
    }
    else{
        //if !global.audio_music_muted{
        //    SS_SetSoundVol(curMusic,2000+80*global.audio_music_volume);
        //    SS_ResumeSound(curMusic);
        //}
        with objDeathSound instance_destroy();
    }
}
// restart function
if(room != rInit &amp;&amp; room != rMenu &amp;&amp; room != rSelectStage &amp;&amp; room != rTitle &amp;&amp; room != rBadEnding &amp;&amp; room != rTruth){
global.death[global.savenum]=0
with(player){
    instance_destroy();
}
with(bow){
    instance_destroy();
}
with(obj_superFasf_combat)
{
    instance_destroy();
}
with(obj_faShiLiu_combat)
{
    instance_destroy();
}
with(obj_faro_combat)
{
    instance_destroy();
}
with(obj_osuController)
{
    instance_destroy();
}
with(obj_evilDragon_combat)
{
    instance_destroy();
}
with(obj_tlController)
{
    instance_destroy();
}
if(instance_exists(player) or instance_exists(player2)){
    saveDeathTime();
    if fps!=0{
            if !global.clear
            global.timestep[global.savenum] += 2*room_speed/fps;
    }
}
//sound_stop_all();
loadGame();
loadAchievements();
global.isRandom = false;
ini_open(global.sfname);    // save file name, change this in the obj_options_init object;

global.leftbutton = ini_read_real("Controls","Left",37);
global.rightbutton = ini_read_real("Controls","Right",39);
global.upbutton = ini_read_real("Controls","Up",38);
global.downbutton = ini_read_real("Controls","Down",40);
global.jumpbutton = ini_read_real("Controls","Jump",16);
global.shotbutton = ini_read_real("Controls","Shoot",90);
global.restartbutton = ini_read_real("Controls","Restart",82);
global.pausebutton = ini_read_real("Controls","Pause",80);
global.skipbutton = ini_read_real("Controls","Skip",83);
global.menubutton = ini_read_real("Controls","Menu",88);

ini_close();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="77">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Ctrl+M ÔøΩÔøΩBGMÔøΩÃóLÔøΩÔøΩÔøΩÔøΩÿÇÔøΩ÷ÇÔøΩÔøΩÈÇ±ÔøΩ∆ÇÔøΩÔøΩ≈ÇÔøΩÔøΩ‹ÇÔøΩ
//ÔøΩZÔøΩ[ÔøΩuÔøΩÔøΩÔøΩÔøΩŒÇÔøΩÔøΩÃê›íÔøΩÕàÔøΩÔøΩÔøΩÔøΩpÔøΩÔøΩÔøΩÔøΩ‹ÇÔøΩ
//ÔøΩœãvÔøΩ»Ç«Ç≈êÔøΩŒÇÔøΩBGMÔøΩó¨ÇÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÍçáÔøΩÕÅA
//ÔøΩTÔøΩÔøΩÔøΩvÔøΩÔøΩÔøΩ{ÔøΩXÔøΩÃÇÊÇ§ÔøΩÔøΩBGMÔøΩÔøΩƒêÔøΩÔøΩÔøΩÔøΩÔøΩ^ÔøΩCÔøΩ~ÔøΩÔøΩÔøΩOÔøΩÔøΩÔøΩÔøΩÁÇπÔøΩŒÇÔøΩÔøΩÔøΩ
if(keyboard_check(vk_control) == true){

sound_stop_all();
if(global.music=0){global.music=1
}else{
global.music=0
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//ÔøΩQÔøΩ[ÔøΩÔøΩÔøΩÔøΩIÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
if pauseon{ 
     pauseon = false;
     instance_activate_all(); 
     background_delete(pauseback);    
     if fps!=0{
            global.timestep[global.savenum] += 2*room_speed/fps;
        }
}
else{
    if(global.inCombat)
       exit;
    if(room != rTitle &amp;&amp; room != rInit)
    {
        //SS_StopSound(global.currentBGM);
        FMODInstanceStop(global.currentBGM);
        //SS_StopSound(SE_Death);
        sound_stop_all();
        saveDeathTime();
        file_delete("temp");
        with player instance_destroy();
        room_goto(rTitle);
    }
    else
    {
        file_delete("temp");
        game_end();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
