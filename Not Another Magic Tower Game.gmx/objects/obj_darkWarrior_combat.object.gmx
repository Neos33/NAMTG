<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_darkWarrior_combat</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-15</depth>
  <persistent>0</persistent>
  <parentName>obj_monsterBattlePrototype</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
name = "Dark Warrior";
image_speed = 1/8;
x=752;
y=48;

bombCount = 1;
minBombCount = 1;

powerCount = 1;
minPowerCount = 1;

spd = 3;
minSpd = 3;

crossWall = false;

godtime = 0;

gridAll = mp_grid_create(192,0,18,18,32,32);
mp_grid_add_instances(gridAll, block, false);
mp_grid_add_instances(gridAll, obj_dwBombWall, false);
gridWall = mp_grid_create(192,0,18,18,32,32);
mp_grid_add_instances(gridWall, block, false);


if(instance_exists(obj_darkWarrior_item))
{
    event_user(1);
}
else
{
    event_user(0);
}

alarm[3] = 50;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!place_meeting(x,y,obj_dwBombWall))
{
    crossWall = false;
}
else
{
    alarm[5] = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>fixX = round((x - 16) / 32);
fixY = round((y - 16) / 32);
px = 32 * fixX + 16;
py = 32 * fixY + 16;
if(superCrazy)
{
    for(i = 0; i &lt; 8; i += 1)
    {
          b = instance_create(px,py,obj_dwFireBall);
          b.direction = i * 45;
    }
}
else
{
    for(i = 0; i &lt; 4; i += 1)
    {
          b = instance_create(px,py,obj_dwFireBall);
          b.direction = i * 90;
    }
}
alarm[4] = 50;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_number(obj_darkWarrior_bomb) &lt; bombCount)
{
    factX = round((x - 16) / 32);
    factY = round((y - 16) / 32);
    bx = 32 * factX + 16;
    by = 32 * factY + 16;
    if(!instance_position(bx,by,block) &amp;&amp; !instance_position(bx,by,obj_dwBombWall))
    {
        bomb = instance_create(bx, by, obj_darkWarrior_bomb);
        bomb.p = powerCount;
        alarm[3] = 30;
    }
    else
    {
        alarm[3] = 1;
    }
}
else
{
    alarm[3] = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(crossWall)
{
    if(!pathCrossWall)
    {
        wallCrossChange = true;
        path_end();
        path_delete(path);
        event_user(2);
        wallCrossChange = false;
    }
}
else
{
    if(pathCrossWall)
    {   
        if(!place_meeting(x,y,obj_dwBombWall))
        {
            wallCrossChange = true;
            path_end();
            path_delete(path);
            event_user(2);
            wallCrossChange = false;
        }
    }
}

if(toTarget)
{
    if(instance_exists(obj_darkWarrior_item))
    {
        path_end();
        event_user(1);
    }
}

if(hp &lt;= 150 &amp;&amp; !crazy)
{
    crazy = true;
    alarm[4] = 1;
}

if(hp &lt;= 50 &amp;&amp; !superCrazy)
{
    superCrazy = true;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(godtime &gt; 0)
{
    godtime -= 1;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if(keyboard_check_pressed(vk_space))
{
    drawGrid ^= 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(godtime &gt; 0)
{
    sound_fix(sndIce1);
    if(!instance_exists(obj_monsterHPBlock))
    {
        instance_create(x,y, obj_monsterHPBlock);
    }
    with(other)
    {
        instance_destroy();
    }
}
else
{
    event_inherited();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_number(obj_dwBombWall) == 0)
{
    if(!global.achievements[87])
    {
        ch = instance_create(0,608,obj_achievements);
        ch.index = 87;
        global.achievements[87] = 1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>gridIndX = (cellX - 192)/32;
gridIndY = (cellY - 0)/32; 
mp_grid_clear_cell(gridAll,gridIndX,gridIndY);
/*fix = instance_create(0,0,obj_dwGridFix);
fix.fx = gridIndX;
fix.fy = gridIndY;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>path = path_add();
if(crossWall)
{
    mp_grid_path(gridWall, path,x,y, targetX, targetY, superCrazy);
    pathCrossWall = true;
}
else
{
    mp_grid_path(gridAll, path,x,y, targetX, targetY, superCrazy);
    pathCrossWall = false;
}
path_set_closed(path,false);
path_set_kind(path,0);
path_start(path,spd,0,1);
tt = instance_create(targetX, targetY, obj_dwTarget);
tt.first = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>item = instance_find(obj_darkWarrior_item,0);
targetX = item.x;
targetY = item.y;
event_user(2);
toTarget = false;
toItem = true;   
    
    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>targetX = 208;
targetY = 16;
while(instance_position(targetX - 16, targetY - 16, block) || instance_position(targetX - 16, targetY - 16, obj_dwBombWall) || (targetX == x &amp;&amp; targetY == y))
{
    txIndex = irandom_range(0,16);
    tyIndex = irandom_range(0,16);
    targetX = 240 + 32 * txIndex;
    targetY = 48 + 32 * tyIndex;
}
event_user(2);
toTarget = true;   
toItem = false;
    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(wallCrossChange)
    exit; 
path_delete(path);
if(instance_exists(obj_darkWarrior_item))
{
    event_user(1);
}
else
{
    event_user(0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(drawGrid)
{
    mp_grid_draw(gridAll);
}
draw_current();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
